services:
  postgres:
    container_name: postgres-sql-bsn
    image: postgres
    environment:
      POSTGRES_USER: username
      POSTGRES_PASSWORD: password
      PGDATA: /var/lib/postgresql/data
      POSTGRES_DB: book_social_network # 容器开始创建数据库
    volumes:
      # 命名卷 (推荐用于持久化数据)
      - postgres:/data/postgres
    ports:
      - 5432:5432
    networks:
      - spring-demo # 所有容器位于的同一network，
    restart: unless-stopped # 容器的重启策略
  # 要使用邮件功能，需要配置一个 SMTP 主机或就像需要配置服务器或邮件链接服务器等等
  # 更好的选择，那就是一个容器。有一种东西叫 maildev，
  mail-dev:
    container_name: mail-dev-bsn
    image: maildev/maildev
    ports:
      - 1080:1080 # web 程序端口
      - 1025:1025 # 应用程序使用端口


networks:
  spring-demo:
    driver: bridge # 使用桥接网络驱动 (默认)

volumes:
  postgres: # 定义一个名为 postgres 的卷
    driver: local # 使用本地驱动 (默认)